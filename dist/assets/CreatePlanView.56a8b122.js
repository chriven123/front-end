import{r,o as d,c,b as e,w as v,v as y,e as _,u as z,t as u,K as p,l as b}from"./index.8e29202f.js";const P=e("h1",null," Crea un piano di pulizia ",-1),V=e("br",null,null,-1),k={style:{float:"left","margin-right":"20px"}},w=e("label",null," Zona ",-1),S={style:{float:"left","margin-right":"20px"}},T=e("label",null," Durata del piano ",-1),$=e("br",null,null,-1),C={style:{color:"red"}},D={style:{color:"white"}},O={}.VITE_API_HOST||"http://localhost:8080",j=O,B={name:"Plan",props:{org_name:String},components:{Datepicker:p},data(){return{org_name:this.org_name,date:null}}},I=Object.assign(B,{setup(m){const t=r(""),l=r(""),i=r("");function g(o,a,n){l.value="",i.value="",f(o,a,n).catch(s=>console.log(s))}async function f(o,a,n){let s=await fetch(j+"/piano_pulizia",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":b.token},body:JSON.stringify({id_zona:t.value,data_inizio:a,data_fine:n,nome_organizzazione:o})});if(s.ok){let h=await s.json();console.log(h),i.value="Piano di pulizia creato con successo"}else s.status==404?l.value="Zona non trovata":l.value="Errore sconosciuto"}return(o,a)=>(d(),c("form",null,[P,V,e("div",k,[w,v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.value=n),placeholder:"ID"},null,512),[[y,t.value]]),e("button",{type:"button",onClick:a[1]||(a[1]=n=>g(o.$props.org_name,o.$data.date[0],o.$data.date[1]))},"Crea piano di pulizia")]),e("div",S,[T,_(z(p),{modelValue:o.date,"onUpdate:modelValue":a[2]||(a[2]=n=>o.date=n),range:""},null,8,["modelValue"])]),$,e("span",C,u(l.value),1),e("span",D,u(i.value),1)]))}}),E={__name:"CreatePlanView",setup(m){return(t,l)=>(d(),c("main",null,[_(I,{org_name:t.$route.params.org_name},null,8,["org_name"])]))}};export{E as default};
